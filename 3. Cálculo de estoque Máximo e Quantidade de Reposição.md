# 3. C√°lculo de Estoque M√°ximo e Quantidade de Reposi√ß√£oüßÆ

## ‚úÖ - Objetivo :

### üßëüèª- Solicita√ß√£o usu√°rio:

O sistema deve permitir registrar o **"Estoque M√°ximo"** para cada produto e calcular a **"Quantidade Necess√°ria"** para reposi√ß√£o em pedidos. Este c√°lculo deve considerar o estoque atual, o consumo m√©dio e o prazo de reposi√ß√£o.

---

### üíª - Rota/tela:

**‚úÖ -  Altera√ß√£o relat√≥rios:**

http://www.keepinformatica.com/almoxarifado/web/relatorio/estoque-minimo

---

### üìÉ - Descri√ß√£o:

Solicita√ß√£o cria uma situa√ß√£o de adicionar um novo registro do estoque levando agora a considera√ß√£o de um **"m√°ximo"** para cada produto que √© requisitado, assim evitando problemas de sobrecarga de produtos no estoque. Ser√° necessario cria√ß√£o de um novo campo **[Estoque M√°ximo(quant)]** em cadastro do produto ao lado do campo **"Estoque M√≠nimo(quant.)"**, assim criando novas possibilidade de calculos do estoque. Alguma das formas √© **consumo m√©dio de produto** que precisa calcular **total de requisi√ß√£o**, **numero de dias por periodos** e gerar um **consumo m√©dio diaro**. Outro c√°lculo necessario √© **quantidade necess√°ria para reposi√ß√£o**, que √© uma facilidade de controle do estoque, considerando alguns parametros que √© ponto de pedido e um estoque de seguran√ßa, dentre os c√°lculos vem **prazo at√© estoque m√≠nimo**, este c√°lculo determina quanto tempo o estoque acima do m√≠nimo vai durar.

Esta solicita√ß√£o descreve a necessidade de adicionar um controle de **estoque m√°ximo** para cada produto cadastrado. O objetivo √© evitar problemas de sobrecarga e excesso de itens no estoque.

Para isso, ser√° necess√°ria a cria√ß√£o de um novo campo denominado **"Estoque M√°ximo (Quant.)"** na tela de cadastro de produtos, preferencialmente posicionado ao lado do campo j√° existente "**Estoque M√≠nimo (Quant.)**".

A introdu√ß√£o do estoque m√°ximo permitir√° novas funcionalidades e c√°lculos de gest√£o, tais como:

1. **C√°lculo do Consumo M√©dio:**
   * Esta funcionalidade exigir√° o registro do **total de itens entregue**  e o **n√∫mero de dias do per√≠odo** analisado.
   * Com base nesses dados, o sistema poder√° calcular o **consumo m√©dio di√°rio** do item.
2. **C√°lculo da Quantidade Necess√°ria para Reposi√ß√£o:**
   * Este c√°lculo visa facilitar o controle e a reposi√ß√£o do estoque.
   * Levar√° em considera√ß√£o par√¢metros como o **ponto de pedido** e o **estoque de seguran√ßa**.
   * Dentro destes c√°lculos, pode-se incluir tamb√©m a estimativa do **prazo at√© atingir o estoque m√≠nimo**, que determina por quanto tempo o saldo atual de estoque (acima do m√≠nimo) atender√° √† demanda antes de necessitar reposi√ß√£o.

---

### ‚òëÔ∏è - Resumo das altera√ß√µes:

* [ ]  Cria√ß√£o de um novo campo "Estoque M√°ximo (Quant) em cadastro de produto e relatorio de "Estoque M√≠nimo";
* [ ]  Cria√ß√£o de um novo campo em **Relatorio/Estoque M√≠nimo** : (Base dos campos abaixo - exemplo)

* F = estoque maximo - Novo campo
* G = estoque excedente - Novo campo
* H= consumo entrega do per√≠odo - Novo campo
* I  = consumo m√©dio di√°rio do per√≠odo - Novo campo
* J = Prz consumo minimo (dias) - Novo campo
* K = Prz consumo total (dias) - Novo campo

## üé≤ - Modelagem de dados:

### üõ†Ô∏è - Tabelas alteradas:

#### Tabela: produto

Descri√ß√£o: cria√ß√£o de uma nova coluna na tabela produtos


| Columns        | Type          |      |
| -------------- | ------------- | ---- |
| estoque_maximo | decimal(10,3) | null |

## üî¢ - C√°lculos:

#### ‚òëÔ∏è- Calcular o Consumo M√©dio do p√©riodo (I);

**Novo campo:** Estoque M√°ximo (F) - Campo que √∫suario digita no cadastro do itens;

Para calcular m√©dio di√°rio (I) √© necessario seguinte dados:

* **`Total_Requisicoes_Periodo`**:<br>
  Somar a quantidade total entregue de iten_requisicao.
* **`Numero_Dias_Periodo`**: <br>
  Calcular o n√∫mero de dias entre a Data Inicial & Data Final do per√≠odo[ data_inicial/data_final].
* **`Consumo_Medio_Diario(i)** = `Total_Requisicoes_Periodo`/`Numero_Dias_Periodo`
  * *Exemplo:* 150 unidades requisitadas em 30 dias -> `Consumo_Medio_Diario` = 150 / 30 = 5 unidades/dia.

#### ‚òëÔ∏è - C√°lculo do prazo at√© estoque m√≠nimo - Pzr consumo minimo (dias) [J]

Este c√°lculo determina quanto tempo o estoque *acima do m√≠nimo* vai durar. √â √∫til para an√°lise, mas **n√£o calcula a quantidade a pedir:**

* **`Estoque_Utilizavel`**: `Estoque_Atual` - `Estoque_Minimo`
* `Dias_Ate_Estoque_Minimo`: `Estoque_Utilizavel` / `Consumo_Medio_Diario` <br>
  *(Usar a m√©dia de consumo di√°rio)*
  * *Exemplo (Usando Estoque Atual 500, M√≠nimo 100, e a **m√©dia de 5 unidades/dia**):*
    * `Estoque_Utilizavel` = 500 - 100 = 400
    * `Dias_Ate_Estoque_Minimo` = 400 / 5 = 80 dias.
  * *Exemplo (Usando a **m√©dia de 20 unidades/dia** ):*
    * `Pzr Consumo minimo (J)` = 400 / 20 = 20 dias.

#### ‚òëÔ∏è - Estoque excedente (G):

Este c√°lculo determina quantidade excedente do estoque de intes que encontra-se acima do valor m√°ximo.

Estoque excedente
**Regra:**

- Caso estoque_excedente menor que 0, trazer = 0;

**Calcular:**

estoque_excedente(G) = estoque_atual(D) - estoque_maximo(F)

#### ‚òëÔ∏è- prazo consumo total (dias)

> F√≥rmula:
> `prazo at√© o estoque acabar = estoque atual √∑ consumo m√©dio di√°rio`

## ‚òëÔ∏è- Prototipa√ß√£o tela:

üñºÔ∏è- View: Finalizar Movimenta√ß√£o Geral

![1745421368597](images/3.C√°lculodeestoqueM√°ximoeQuantidadedeReposi√ß√£o/1745421368597.png)

* A = codigo - J√° existe
* B = descri√ß√£o produto - J√° existe
* C = UND - J√° existe
* D = estoque atual - J√° existe
* E = estoque minimo - J√° existe
* F = estoque maximo - Novo campo (Campo digitavel pelo usuario)
* G = estoque excedente - Novo campo (Calculo Estoque excendente)
* H= consumo entrega do per√≠odo - J√° existe
* I  = consumo m√©dio di√°rio do per√≠odo - Novo campo (Calculo consumo m√©dio do p√©riodo)
* J = Prz consumo minimo (dias) - Novo campo (C√°lculo do prazo at√© estoque m√≠nimoC√°lculo)
* K = Prz consumo total (dias) - Novo campo
* l = Prz reposi√ß√£o (dias) - J√° existe
