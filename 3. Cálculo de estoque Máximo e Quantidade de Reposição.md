# 3. C√°lculo de Estoque M√°ximo e Quantidade de Reposi√ß√£oüßÆ

## ‚úÖ - Objetivo :

### üßëüèª- Solicita√ß√£o usu√°rio:

O sistema deve permitir registrar o **"Estoque M√°ximo"** para cada produto e calcular a **"Quantidade Necess√°ria"** para reposi√ß√£o em pedidos. Este c√°lculo deve considerar o estoque atual, o consumo m√©dio e o prazo de reposi√ß√£o.

---

### üíª - Rota/tela:

**‚úÖ -  Altera√ß√£o relat√≥rios:**

http://www.keepinformatica.com/almoxarifado/web/relatorio/estoque-minimo

---

### üìÉ - Descri√ß√£o:

Solicita√ß√£o cria uma situa√ß√£o de adicionar um novo registro do estoque levando agora a considera√ß√£o de um **"m√°ximo"** para cada produto que √© requisitado, assim evitando problemas de sobrecarga de produtos no estoque. Ser√° necessario cria√ß√£o de um novo campo **[Estoque M√°ximo(quant)]** em cadastro do produto ao lado do campo **"Estoque M√≠nimo(quant.)"**, assim criando novas possibilidade de calculos do estoque. Alguma das formas √© **consumo m√©dio de produto** que precisa calcular **total de requisi√ß√£o**, **numero de dias por periodos** e gerar um **consumo m√©dio diaro**. Outro c√°lculo necessario √© **quantidade necess√°ria para reposi√ß√£o**, que √© uma facilidade de controle do estoque, considerando alguns parametros que √© ponto de pedido e um estoque de seguran√ßa, dentre os c√°lculos vem **prazo at√© estoque m√≠nimo**, este c√°lculo determina quanto tempo o estoque acima do m√≠nimo vai durar.

Esta solicita√ß√£o descreve a necessidade de adicionar um controle de **estoque m√°ximo** para cada produto cadastrado. O objetivo √© evitar problemas de sobrecarga e excesso de itens no estoque.

Para isso, ser√° necess√°ria a cria√ß√£o de um novo campo denominado **"Estoque M√°ximo (Quant.)"** na tela de cadastro de produtos, preferencialmente posicionado ao lado do campo j√° existente "**Estoque M√≠nimo (Quant.)**".

A introdu√ß√£o do estoque m√°ximo permitir√° novas funcionalidades e c√°lculos de gest√£o, tais como:

1. **C√°lculo do Consumo M√©dio:**
   * Esta funcionalidade exigir√° o registro do **total de requisi√ß√µes** de um produto e o **n√∫mero de dias do per√≠odo** analisado.
   * Com base nesses dados, o sistema poder√° calcular o **consumo m√©dio di√°rio** do item.
2. **C√°lculo da Quantidade Necess√°ria para Reposi√ß√£o:**
   * Este c√°lculo visa facilitar o controle e a reposi√ß√£o do estoque.
   * Levar√° em considera√ß√£o par√¢metros como o **ponto de pedido** e o **estoque de seguran√ßa**.
   * Dentro destes c√°lculos, pode-se incluir tamb√©m a estimativa do **prazo at√© atingir o estoque m√≠nimo**, que determina por quanto tempo o saldo atual de estoque (acima do m√≠nimo) atender√° √† demanda antes de necessitar reposi√ß√£o.

---

### ‚òëÔ∏è - Resumo das altera√ß√µes:

* [ ]  Cria√ß√£o de um novo campo "Estoque M√°ximo (Quant) em cadastro de produto e relatorio de "Estoque M√≠nimo";
* [ ]  Cria√ß√£o de um novo campo em Relatorio/Estoque M√≠nimo - Qtd. Necessaria, Consumo m√©dio Di√°rio e possibilidade de um c√°lculo adicional de C√°lculo do prazo at√© estoque m√≠nimo.

## üé≤ - Modelagem de dados:

### üõ†Ô∏è - Tabelas alteradas:

#### Tabela: produto

Descri√ß√£o:


| Columns        | Type          |      |
| -------------- | ------------- | ---- |
| estoque_maximo | decimal(10,3) | null |


## üî¢ - C√°lculos:

#### ‚òëÔ∏è- Calcular o Consumo M√©dio Di√°rio

* **`Total_Requisicoes_Periodo`**:<br>
  Somar a quantidade total requisitada/consumida do produto dentro do Per√≠odo de An√°lise selecionado.
* **`Numero_Dias_Periodo`**: <br>
  Calcular o n√∫mero de dias entre a Data Inicial & Data Final do per√≠odo.
* **`Consumo_Medio_Diario`** = `Total_Requisicoes_Periodo` / `Numero_Dias_Periodo`
  * *Exemplo:* 150 unidades requisitadas em 30 dias -> `Consumo_Medio_Diario` = 150 / 30 = 5 unidades/dia.

#### ‚òëÔ∏è- C√°lculo da Quantidade Necess√°ria para Reposi√ß√£o

##### ‚òëÔ∏è- Obter Dados Atuais:

* **`Estoque_Atual`**: Quantidade atual do produto em estoque.
* **`Estoque_Minimo`**: Quantidade m√≠nima definida para o produto.
* **`Estoque_Maximo`**: Quantidade m√°xima.
* **`Consumo_Medio_Diario`**: Valor calculado.

##### ‚òëÔ∏è- Calcular a Quantidade Necess√°ria:

* **`Estoque_Seguranca`**: Frequentemente igual ao `Estoque_Minimo` ou um pouco acima.
* **`Consumo_Durante_Reposicao`**: `Consumo_Medio_Diario` * `Prazo_Reposicao_Dias`
* **`Ponto_Pedido`**: `Consumo_Durante_Reposicao` + `Estoque_Seguranca`
* SE `Estoque_Atual` <= `Ponto_Pedido` <br>
  ENT√ÉO:`Quantidade_Necessaria` = (`Estoque_Maximo` - `Estoque_Atual`)
* **SEN√ÉO:** <br>
  `Quantidade_Necess√°ria` = 0 (N√£o √© necess√°rio pedir ainda).

#### ‚òëÔ∏è - C√°lculo do prazo at√© estoque m√≠nimo (Adicional)

Este c√°lculo determina quanto tempo o estoque *acima do m√≠nimo* vai durar. √â √∫til para an√°lise, mas **n√£o calcula a quantidade a pedir:**

* **`Estoque_Utilizavel`**: `Estoque_Atual` - `Estoque_Minimo`
* **`Dias_Ate_Estoque_Minimo`**: `Estoque_Utilizavel` / `Consumo_Medio_Diario` <br>
  *(Usar a m√©dia de consumo di√°rio)*
  * *Exemplo (Usando Estoque Atual 500, M√≠nimo 100, e a **m√©dia de 5 unidades/dia**):*
    * `Estoque_Utilizavel` = 500 - 100 = 400
    * `Dias_Ate_Estoque_Minimo` = 400 / 5 = 80 dias.
  * *Exemplo (Usando a **m√©dia de 20 unidades/dia** ):*
    * `Dias_Ate_Estoque_Minimo` = 400 / 20 = 20 dias.

## ‚òëÔ∏è- Prototipa√ß√£o tela:

üñºÔ∏è- View: Finalizar Movimenta√ß√£o Geral

![1744832304895](images/3.C√°lculodeestoqueM√°ximoeQuantidadedeReposi√ß√£o/1744832304895.png)
