# 4. ParÃ¢metros de Cores Indicativas de Status do Produto ğŸŸ¢ğŸŸ¡ğŸ”´

## âœ… - Objetivo :

### ğŸ§‘ğŸ»- SolicitaÃ§Ã£o usuÃ¡rio:

Sinalizar visualmente os itens do estoque com cores (ğŸŸ¢ - Verde, ğŸŸ¡ - Amarelo, ğŸ”´ - Vermelho) para indicar a criticidade, priorizando a **proximidade da data de validade** a fim de evitar perdas por vencimento.

---

### ğŸ’» - Rota/tela:

**âœ… -  Route alteraÃ§Ã£o**
http://www.keepinformatica.com.br/almoxarifado/web/relatorio/posicao-almoxarifado

---

### ğŸ“ƒ - DescriÃ§Ã£o:

A lÃ³gica atualmente implementada baseia-se na estimativa de quantos dias o estoque disponÃ­vel pode atender Ã  demanda, com base no consumo mÃ©dio recente. A partir disso, Ã© adotado um sistema de semÃ¡foro que utiliza cores para comunicar, de maneira lÃºdica e visualmente intuitiva, a situaÃ§Ã£o dos itens no relatÃ³rioâ€œPosiÃ§Ã£o.

SerÃ£o apresentadas duas formas de anÃ¡lise:

1. Uma baseada na projeÃ§Ã£o dos dias restantes de estoque (quantidade disponÃ­vel);
2. Outra considerando o tempo atÃ© o vencimento do item (data de validade).

### â˜‘ï¸ - Resumo das alteraÃ§Ãµes:

* [ ]  EdiÃ§Ã£o de visualizaÃ§Ã£o relatorio posiÃ§Ã£o:
  * [ ]  Remover campo LocalizaÃ§Ã£o do relatorio;
  * [ ]  Criar novo campo "Consumo mÃ©dio diÃ¡rio (item)";
  * [ ]  Criar sinaleira do nivel de estoqueğŸŸ¢ğŸŸ¡ğŸ”´;
  * [ ]  Criar novo campo "Prazo consumo(Dias);
  * [ ]  Criar novo campo Prazo reposiÃ§Ã£o(Dias);
  * [ ]  Criar novo campo Prazo consumo efetivo(Dias);
  * [ ]  Criar sinaleira "Validade do Lote" ğŸŸ¢ğŸŸ¡ğŸ”´;

---

### ğŸ”¢ **Campos do relatorio novo:**

* **A - cÃ³digo**: IdentificaÃ§Ã£o do item. -
* **B - descriÃ§Ã£o**: Nome do item.
* **C - UN**: Unidade de medida.
* **D - Lote**: IdentificaÃ§Ã£o do lote e sua data de validade.
* **E - Saldo**: Quantidade restante do lote em estoque.
* **F - Custo total**: Valor total do saldo em estoque.
* **G - Consumo mÃ©dio diÃ¡rio (item)**: MÃ©dia de consumo diÃ¡rio do item (Soma Qtd.entrega).
* **H - nÃ­vel estoque**: IndicaÃ§Ã£o visual da situaÃ§Ã£o do estoque (via semÃ¡foro).
* **I - prazo consumo (dias)**: Quantos dias o estoque atual cobre, baseado no consumo mÃ©dio diÃ¡rio.
* **J - prazo reposiÃ§Ã£o (dias)**: Tempo necessÃ¡rio para repor o produto.
* **K -prazo consumo efetivo (dias)**: Tempo Ãºtil de consumo antes da validade expirar.
* **L - validade do lote**: SinalizaÃ§Ã£o visual baseada na comparaÃ§Ã£o entre consumo e vencimento.

### ğŸ§® **ExplicaÃ§Ãµes de CÃ¡lculo Campo a Campo:**

### âœ… - Calculo   Consumo mÃ©dio diÃ¡rio (item) [ G ]:

Utiliza mesma logica do exemplo anterior (podendo chamar a mesma funÃ§Ã£o), porem deve-se atentar que sera por produto.
Calculo:
Para calcular mÃ©dio diÃ¡rio (I) Ã© necessario seguinte dados:

* **`Total_Requisicoes_Periodo`**:<br>
  Somar a quantidade total entregue de iten_requisicao.
* **`Numero_Dias_Periodo`**: <br>
  Calcular o nÃºmero de dias entre a Data Inicial & Data Final do perÃ­odo[ data_inicial/data_final].
* `Consumo_Medio_Diario(i) = `Total_Requisicoes_Periodo`/`Numero_Dias_Periodo`
  * *Exemplo:* 150 unidades requisitadas em 30 dias -> `Consumo_Medio_Diario` = 150 / 30 = 5 unidades/dia.

### âœ… **Nivel de Estoque [ H ]:**

Calcular uma mÃ©dia de nivel do estoque precisamos dos sequintes campos:

* **K -prazo consumo efetivo (dias)**:
* **J - prazo reposiÃ§Ã£o (dias)**:

Com base nas regras abaixo:


| CondiÃ§Ã£o             | Resultado (H) |
| ---------------------- | ------------- |
| I < J                  | ğŸ”´ CrÃ­tico   |
| I â‰¥ J e I â‰¤ (J Ã— 2) | ğŸŸ¡ Alerta     |
| I > (J Ã— 2)           | ğŸŸ¢ Seguro     |

Onde:

* **I = prazo de consumo**
* **J = prazo reposiÃ§Ã£o**

##### ğŸ§® FÃ³rmula em pseudo-cÃ³digo:

```
Se (prazo_consumo < prazo_reposicao)
    nÃ­vel_estoque = "CrÃ­tico"
SenÃ£o se (prazo_consumo <= prazo_reposicao * 2)
    nÃ­vel_estoque = "Alerta"
SenÃ£o
    nÃ­vel_estoque = "Seguro"

```

### â˜‘ï¸ - Prazo consumo (dias) [ I ]:

Quantos dias o estoque atual cobre, baseado no consumo mÃ©dio diÃ¡rio.

##### âœ… FÃ³rmula simples:

```
Prazo de consumo (I) = Saldo (E) Ã· Consumo mÃ©dio diÃ¡rio (G)
```

##### ğŸ’¡ InterpretaÃ§Ã£o:

* Se o **saldo for 100** e o consumo diÃ¡rio for 10 â†’ o estoque cobre **10 dias**;
* Se o saldo for 30 e o consumo diÃ¡rio for 15 â†’ cobre **2 dias**;
* Se o consumo for 0 â†’ retorna **0 dias** (ou vocÃª pode personalizar como â€œsem consumo");
* Se o saldo for 0 â†’ retornar 0 dias (ou vocÃª pode personalizar como "sem saldo");

### âœ… **prazo consumo efetivo (dias) [ K ]:**

Para calcular prazo consumo precisar das seguintes informaÃ§Ãµes:
Prazo ReposiÃ§Ã£o (Dias) [ J ] : campo de produto [Prazo para reposiÃ§Ã£o (dias)]
Prazo consumo (dias) [ I ]:

> FÃ³rmula:
> `prazo consumo efetivo [ K ] = prazo consumo [ I ] - prazo reposiÃ§Ã£o [ J ]`

### âœ…- CÃ¡lculo da validade restante [ L ]:

#### ğŸ§® Como calcular:

Coluna **L - Validade do lote**, que serve como um **alerta visual** sobre o risco de um lote  **vencer antes de ser consumido**, alum dos campos que precisamos utilizar para parametros tais como eles: 

Compare:

* **K - Prazo de consumo efetivo (dias)**: quanto tempo falta para o lote vencer.
* **Vencimento** no cadastrado do **Lote** que vamos apelidar temporariamente como **[ L ]**;

#### ğŸ¯ LÃ³gica de sinalizaÃ§Ã£o (semÃ¡foro):


| CondiÃ§Ã£o          | Resultado (L)                  |
| ------------------- | ------------------------------ |
| K < I               | ğŸ”´ Vai vencer antes de acabar  |
| K â‰¥ I e K â‰¤ I  | ğŸŸ¡ AtenÃ§Ã£o (limite prÃ³ximo) |
| K > I            | ğŸŸ¢ Consumo dentro da validade  |

#### ğŸ’¡ InterpretaÃ§Ã£o:

* Se o **prazo de validade** for **menor que o tempo necessÃ¡rio para consumir tudo**, tem risco de **perda**.
* Se faltar **pouco tempo de margem**, ainda Ã© possÃ­vel usar com atenÃ§Ã£o.
* Se sobra bastante tempo, estÃ¡ **dentro da validade**.

![1745430646148](images/4.ParÃ¢metrosdeCoresIndicativasdeStatusdoProduto/1745430646148.png)
